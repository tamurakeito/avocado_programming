第1章では、Flutterがどんな雰囲気でアプリの見た目を作っているのかを覗いてみましたね。
コードが設計図のようになっていて、それをFlutterが解釈して画面に表示するのでした。

では、その設計図（コード）は、どんな「言語」で書かれているのでしょうか？ 
それが、この章で学ぶ **「Dart（ダート）」** というプログラミング言語です。

Flutterに「こういうアプリを作って！」と指示を出すためには、Dart言語のルールに従ってコードを書く必要があります。
ある違う国の人と話すためにその人の言語を覚えるようなものです。

もちろん、最初からDart言語の全てをマスターする必要はありません！この講座、特にTODOアプリを作る上で最低限必要な基本的なルールに絞って、わかりやすく解説していきます。

## Dartってどんな言語？

Dartは、Flutterと同じくGoogleによって開発されたプログラミング言語です。

いくつか特徴がありますが、特に私たちに関係する点を挙げると：

    - **比較的学びやすい**： 他のプログラミング言語に触れたことがない人でも、基本的な考え方が理解しやすいように設計されています。
    - **Flutterに最適化されている**： Flutterで美しいUI（ユーザーインターフェース、つまり画面の見た目）を効率よく作るのに非常に適しています。
    - **柔軟性がある**： 元々はWebアプリ開発なども視野に入れて作られており、応用範囲が広い言語です。（今回の講座ではFlutterアプリ開発に集中します）

それでは、具体的なルールを見ていきましょう！

## まずはこれだけ！変数とデータ型

プログラミングでは、文字や数字などの「データ」を扱います。
これらのデータを一時的に保管しておくための「箱」のようなものが必要になります。
それが **変数（へんすう）** です。変数を使うことで、データに名前をつけて管理しやすくなります。

### 変数と「型」

変数という「箱」には、**どんな種類のデータを入れるか**をあらかじめ決めておくことが重要です。
このようなデータの種類を、**データ型**（または単に「**型**」）と呼びます。

なぜ型が重要なのでしょうか？

1. **コードが読みやすくなる**： 変数に型が指定されていれば、その変数にどんな種類のデータが入っているか（または入るべきか）が一目でわかります。
2. **間違いを防ぎやすくなる**： 例えば、「数字（整数）を入れるための箱」と決めた変数に、うっかり「文字」を入れようとすると、プログラムを実行する前にDartが「型が違いますよ！」と教えてくれることがあります。これにより、予期せぬエラーを減らすことができます。

Dartには基本的なデータの型がいくつか用意されています。

- `String` **(文字列型)**: 'アボカド' や "Hello!" のような文字や文章を表します。シングルクォーテーション (`'`) またはダブルクォーテーション (`"`) で囲みます。
- `int` **(整数型)**: `20` や `100` のような小数点のない数字を表します。
- `double` **(浮動小数点数型)**: `3.14` や `0.5` のような小数点のある数字を表します。（`int` と `double` の両方を扱える `num` という型もありますが、通常はどちらかはっきり指定する方が分かりやすいです）
- `bool` **(ブーリアン型/真偽値型)**: `true` (真、はい) または `false` (偽、いいえ) のどちらかを表します。条件分岐（後述）などでよく使います。

### 変数を作る（宣言する）

変数は、`型名 変数名 = 入れる値;` のように書くのが基本です。
**このように型を明示的に指定する方法を推奨します。**

<CodeBlock language="dart" gist="3391139f5a853b125a99540aaca66092">
{`String userName = 'アボカド'; // userNameは文字列(String)を入れる箱
  int userAge = 20;         // userAgeは整数(int)を入れる箱
  double weight = 55.5;       // weightは小数(double)を入れる箱
  bool isMember = true;      // isMemberは真偽値(bool)を入れる箱

  print(userName); // 出力: アボカド
  print(userAge);  // 出力: 20`}
</CodeBlock>

コードの最後についている `;` (セミコロン) は、Dart言語で「文の終わり」を示すお約束の記号です。忘れずにつけましょう。

### （補足）`var` について

Dartには `var` というキーワードもあり、これを使うとDartが `=` の右辺の値から自動で型を推測してくれます。

<CodeBlock language="dart">
{`var myName = 'アボカド'; // Dartが 'アボカド' を見て String型だと推測する
  var age = 20;         // Dartが 20 を見て int型だと推測する`}
</CodeBlock>

短いコードでは便利に見えますが、コードが長くなると `var` だけでは型が分かりにくくなることがあります。
そのため、**この講座では基本的に型（`String`, `int` など）を明示的に書く方法で進めていきます。**

## データの集まりを扱う：リスト (List)

アプリでは、一つのデータだけでなく、複数のデータをまとめて扱いたい場面がたくさんあります。
例えば、TODOアプリなら「やること」のリスト、買い物アプリなら「カートに入れた商品」のリストなどです。
そんな時に使うのが `List` **(リスト)** です。リストは、複数のデータを順番に格納できる、棚のようなものです。

### リストにも型がある

変数と同じように、リストにも **「どんな型のデータを格納するリストなのか」** を指定することが非常に重要です。
これにより、リストに間違った型のデータが入るのを防ぎ、コードの意図を明確にできます。

リストの型は `List<型名>` のように書きます。`< >` の中に、リストに入れるデータの型を指定します。

- `List<String>` : 文字列(`String`)だけを入れるリスト
- `List<int>` : 整数(`int`)だけを入れるリスト
- `List<bool>` : 真偽値(`bool`)だけを入れるリスト

### リストの作成と操作

**型を指定してリストを作成することを推奨します。**

<CodeBlock language="dart">
{`// 型を指定してリストを作成
  List<String> fruits = ['りんご', 'バナナ', 'オレンジ']; // String型のリスト
  List<int> numbers = [1, 10, 5];                 // int型のリスト
  List<bool> flags = [true, false, true];        // bool型のリスト
  List<String> emptyTasks = [];                   // String型の空リスト

  // リストの中身にアクセスする (順番は0から数える！)
  print(fruits[0]); // 出力: りんご (リストの最初の要素)
  print(fruits[1]); // 出力: バナナ (リストの2番目の要素)

  // リストに要素を追加する
  fruits.add('ぶどう'); // String型のリストなので、Stringを追加できる
  // fruits.add(100); // これはエラー！ String型のリストにintは追加できない

  print(fruits); // 出力: [りんご, バナナ, オレンジ, ぶどう]

  // リストの要素数を調べる
  print(fruits.length); // 出力: 4

  // リストが空かどうか調べる
  print(emptyTasks.isEmpty); // 出力: true`}
</CodeBlock>

リストの順番（インデックス）は **0から始まる** ことに注意してください。最初の要素は `[0]`、2番目は `[1]` となります。
これは多くのプログラミング言語で共通のルールです。

## 処理をまとめる：関数 (Function)

同じような処理を何度も書くのは大変ですし、コードが読みにくくなります。
そこで、一連の処理をまとめて名前をつけ、再利用しやすくする仕組みが **関数（かんすう）** です。

例えば、「クリームシチュー」のレシピ全体を考えてみましょう。その中で「ホワイトソースを作る」という工程は、結構な手順がありますよね？
もし、シチューのレシピの中に毎回ホワイトソースの作り方を全部書いていたら、メインのシチュー作りの流れがとても分かりにくくなってしまいます。

そこで、「ホワイトソースの作り方」という独立した小さなレシピ（これが関数）を別に用意しておきます。
そして、メインのシチューのレシピの中では、「ここでホワイトソースを作る（詳しくは別紙参照）」と書くだけで済むようにするのです。
こうすることで、メインのレシピはすっきりし、ホワイトソースの作り方を変えたくなった時も、その独立した関数だけを修正すればよくなります。
これが関数の考え方です。

### 簡単な関数

<CodeBlock language="dart">
{`// 「こんにちは！」と表示するだけの関数
  void sayHello() {
    print('こんにちは！');
  }

  // 関数を呼び出す（実行する）
  sayHello(); // 出力: こんにちは！`}
</CodeBlock>

- `void` は、この関数が「何も値を返さない（処理を実行するだけ）」ことを意味します。
- `sayHello` が関数の名前です。
- `()` の中には、関数に渡す情報（引数、ひきすう）を書きますが、今回は不要なので空です。
- `{}` の中に、関数が行う処理を書きます。

### 引数（ひきすう）を受け取る関数

関数に情報を渡して、処理の内容を変えることもできます。

<CodeBlock language="dart">
{`// 名前(String型)を受け取って挨拶する関数
  void greet(String name) { // nameという名前でString型の引数を受け取る
    print('こんにちは、$name さん！'); // 受け取ったnameを使って挨拶
  }

  greet('アボカド'); // 出力: こんにちは、アボカド さん！
  greet('皆さん');   // 出力: こんにちは、皆さん さん！`}
</CodeBlock>

`print`文の中の `$name` という書き方に注目してください。
これは **文字列内挿（ないそう）** といい、文字列の中に変数の値を簡単に埋め込むための便利な記法です。

### 値を返す関数

関数は、処理の結果として何らかの値を返すこともできます。

<CodeBlock language="dart">
{`// ２つの整数(int型)を受け取って、合計(int型)を返す関数
  int add(int a, int b) { // int型の値を返すことを示す
    return a + b; // 計算結果(a + b)を返す
  }

  int result = add(5, 3); // add関数を呼び出し、返された結果(8)をint型の変数resultに入れる
  print(result); // 出力: 8`}
</CodeBlock>

- 関数名の前の `int` は、この関数が `int` 型（整数）の値を返すことを示します。
- `return` キーワードの後ろに、関数が返す値を書きます。<br/>
  `return` が実行されると、その時点で関数の処理は終了します。

## もし〜だったら？条件分岐 (if)

プログラムでは、「もし○○だったら××する、そうでなければ△△する」というように、条件によって処理の流れを変えたいことがよくあります。
これが **条件分岐（じょうけんぶんき）** で、`if` 文を使います。

<CodeBlock language="dart">
{`int temperature = 25;

  if (temperature >= 30) {
    print('暑い！エアコンをつけましょう。');
  } else if (temperature >= 20) {
    print('快適な気温ですね。');
  } else {
    print('少し肌寒いかも。上着があると良いでしょう。');
  }
  // この場合、temperatureは25なので、出力は「快適な気温ですね。」`}
</CodeBlock>

- `if (条件式)`: 条件式が `true` (真) の場合に `{}` の中の処理を実行します。
- `else if (条件式)`: 上の `if` の条件が `false` (偽) で、こちらの条件式が `true` の場合に実行します。いくつでも繋げられます。
- `else`: 全ての `if`, `else if` の条件が `false` だった場合に実行します。不要なら省略できます。

### 比較演算子（ひかくえんざんし）

条件式では、以下のような記号で値を比較します。

- `==:` 等しい (例: `a == 10`) ※ `=` 1つは代入なので注意！
- `!=:` 等しくない (例: `a != 10`)
- `>`: より大きい (例: `a > 10`)
- `<`: より小さい (例: `a < 10`)
- `>=`: 以上 (例: `a >= 10`)
- `<=`: 以下 (例: `a <= 10`)

## 繰り返し処理 (for) ※TODOアプリで使う範囲で

リストの中身を一つずつ取り出して何か処理をしたい、という場合に便利なのが **繰り返し（ループ）** です。
`for` 文を使います。TODOアプリでは、TODOリストの項目を順番に画面表示する際などに使います。

リストの全ての要素に対して同じ処理を行うには、`for-in` ループが簡単でよく使われます。

<CodeBlock language="dart">
{`List<String> fruits = ['りんご', 'バナナ', 'オレンジ']; // 型指定したリスト

  for (String fruit in fruits) {
    // fruitsリストの中身が、ループごとに順番にfruit変数(String型)に入る
    print(fruit + 'はおいしい！');
  }
  // 出力:
  // りんごはおいしい！
  // バナナはおいしい！
  // オレンジはおいしい！`}
</CodeBlock>

これは、「`fruits` リスト（`List<String>`）の中の各要素を、順番に `fruit` という名前の変数（`String` 型）に入れて `{}` の中の処理を実行してください」という意味になります。ループ内で使う変数（ここでは `fruit`）にも型を指定するのが良い習慣です。

---

お疲れ様でした！今回はFlutterアプリを書くための言語、Dartの基本的な文法を見てきました。

- **変数とデータ型**: データを入れる箱。型（String, int, double, boolなど）を指定することが重要。
- **リスト** (`List<型名>`): 同じ型のデータを順番にまとめる。リスト自体にも型を指定する。
- **関数** (`Function`): 処理をまとめて再利用しやすくする。引数を受け取ったり、値を返したりできる。
- **条件分岐** (`if`): 条件によって処理の流れを変える。
- **繰り返し** (`for-in`): リストの要素を一つずつ処理する。

特に **「型」を意識すること** は、これからコードを書いていく上でとても大切になります。

これだけ知っていれば、Flutterで画面の部品（Widget）を組み合わせていく準備はかなり整いました。
次の章では、いよいよFlutterアプリの画面を構成する「Widget」について詳しく見ていきましょう！